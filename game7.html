<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ë…¼ë¦¬ë ¥ í›ˆë ¨: AI ì˜¤ëª© ëŒ€ê²° & ìˆ˜ ì½ê¸° | SKZ Brain Lab</title>
    <meta name="description" content="AIë¥¼ ìƒëŒ€ë¡œ ë‹¹ì‹ ì˜ ë…¼ë¦¬ë ¥ê³¼ ìˆ˜ ì½ê¸° ëŠ¥ë ¥ì„ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”. 3x3 ê¸ˆìˆ˜ ê·œì¹™ì´ ì ìš©ëœ ì •í†µ ì˜¤ëª© ê²Œì„ìœ¼ë¡œ ë‘ë‡Œë¥¼ í›ˆë ¨í•©ë‹ˆë‹¤.">
    <meta name="keywords" content="ì˜¤ëª©, AIì˜¤ëª©, ë…¼ë¦¬ë ¥í›ˆë ¨, ë‘ë‡Œê²Œì„, ìˆ˜ì½ê¸°, ì˜¨ë¼ì¸ì˜¤ëª©, SKZBrainLab">
    <link rel="canonical" href="https://jeonghyeonmi.github.io/hmi/game7.html">

    <meta property="og:type" content="website">
    <meta property="og:title" content="AIë¥¼ ì´ê¸¸ ìˆ˜ ìˆì„ê¹Œìš”? - SKZ ì˜¤ëª© ìˆ˜ ì½ê¸°">
    <meta property="og:description" content="ë‹¨ìˆœí•œ ê²Œì„ì„ ë„˜ì–´ì„  ë…¼ë¦¬ë ¥ í›ˆë ¨. 5ìˆ˜ë¥¼ ì•ì„œê°€ëŠ” AIì™€ ëŒ€ê²°í•˜ì„¸ìš”.">
    <meta property="og:image" content="img/index.jpg">
    <meta property="og:url" content="https://jeonghyeonmi.github.io/hmi/game7.html">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "SKZ AI ì˜¤ëª© í›ˆë ¨",
      "operatingSystem": "Web",
      "applicationCategory": "GameApplication",
      "genre": "Logic Game",
      "description": "AIì™€ ëŒ€ê²°í•˜ë©° ë…¼ë¦¬ì  ì‚¬ê³ ë ¥ì„ ê¸°ë¥´ëŠ” ì˜¤ëª© í›ˆë ¨ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "KRW"
      }
    }
    </script>

    <style>
        /* [ê¸°ì¡´ ë ˆì´ì•„ì›ƒ CSS ìŠ¤íƒ€ì¼ ìœ ì§€] */
        :root { 
            --primary-color: #1a3a5f; --bg-color: #f4f7f9; --accent-color: #3498db; 
            --board-color: #edc9af; --white: #ffffff;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Pretendard', sans-serif; background-color: var(--bg-color); margin: 0; color: #333; line-height: 1.6; }
        
        header { background: var(--primary-color); color: white; padding: 1.2rem; text-align: center; }
        header h1 { margin: 0; font-size: 1.4rem; font-weight: 800; }
        header h1 a { text-decoration: none; color: inherit; }
        
        nav.main-nav { 
            background: white; padding: 0.8rem; display: flex; justify-content: center; gap: 1.2rem; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); overflow-x: auto; white-space: nowrap; 
            scrollbar-width: none; position: sticky; top: 0; z-index: 1000;
        }
        nav.main-nav::-webkit-scrollbar { display: none; }
        nav.main-nav a { text-decoration: none; color: var(--primary-color); font-weight: bold; font-size: 0.9rem; flex-shrink: 0; }
        nav.main-nav a.active { color: var(--accent-color); border-bottom: 2px solid var(--accent-color); }

        .sub-nav { display: flex; justify-content: center; gap: 12px; padding: 12px 0; background: #fff; border-bottom: 1px solid #eee; font-size: 0.75rem; }
        .sub-nav a { text-decoration: none; color: #aaa; font-weight: 500; }
        .sub-nav a.current { color: var(--accent-color); font-weight: bold; }

        .container { 
            width: 95%; max-width: 500px; margin: 1.5rem auto; padding: 20px; 
            background: white; border-radius: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: center; 
        }

        .game-info-text { text-align: left; background: #f0f4f8; padding: 15px; border-radius: 12px; margin-bottom: 15px; font-size: 0.85rem; }
        .game-info-text h2 { font-size: 1rem; margin-top: 0; color: var(--primary-color); }

        .mode-selector { display: flex; justify-content: center; gap: 10px; margin: 15px 0; }
        .mode-btn { 
            cursor: pointer; color: #888; font-size: 0.75rem; padding: 6px 12px; 
            border: 1px solid #ddd; border-radius: 20px; transition: 0.2s; background: none;
        }
        .mode-btn.active { color: var(--accent-color); border-color: var(--accent-color); font-weight: bold; background: #eef7ff; }

        .status-box { 
            background: #f8fafc; padding: 12px; border-radius: 12px; margin-bottom: 15px;
            display: flex; justify-content: space-between; align-items: center; font-weight: bold; font-size: 0.9rem;
        }

        #canvas-wrapper { 
            width: 100%; aspect-ratio: 1 / 1; background: var(--board-color); 
            border-radius: 10px; box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
            position: relative; touch-action: none;
        }
        canvas { width: 100%; height: 100%; display: block; }
        
        #msg-area { color: #e74c3c; font-size: 0.8rem; height: 1.2rem; margin: 10px 0; font-weight: bold; }

        .controls { display: flex; gap: 10px; justify-content: center; }
        .btn { border: none; padding: 12px 20px; border-radius: 50px; font-weight: bold; cursor: pointer; transition: 0.2s; flex: 1; }
        .btn-reset { background: var(--primary-color); color: white; }
        .btn-undo { background: #e2e8f0; color: #444; }

        footer { text-align: center; padding: 2rem 0; color: #bbb; font-size: 0.8rem; }
    </style>
</head>
<body>

<header>
    <h1><a href="index.html">SKZ ë‘ë‡Œ í›ˆë ¨ì†Œ</a></h1>
</header>

<nav class="main-nav" aria-label="ë©”ì¸ ë©”ë‰´">
    <a href="index.html">í™ˆ</a>
    <a href="game.html">ì§‘ì¤‘ë ¥</a>
    <a href="game2.html" class="active">ë…¼ë¦¬ë ¥</a>
    <a href="game3.html">íŒë‹¨ë ¥</a>
    <a href="report.html">ë¦¬í¬íŠ¸</a>
    <a href="posts.html">ë¶„ì„ì‹¤</a>
</nav>

<nav class="sub-nav" aria-label="ë…¼ë¦¬ë ¥ ê²Œì„ ë©”ë‰´">
    <a href="game2.html">[ë¯¸ë‹ˆìŠ¤ë„ì¿ ]</a>
    <a href="game7.html" class="current">[AI ì˜¤ëª©]</a>
</nav>

<main class="container">
    <article class="game-info-text">
        <h2>ğŸ§  ì˜¤ëª© ìˆ˜ ì½ê¸° í›ˆë ¨</h2>
        <p>ìƒëŒ€(AI)ë³´ë‹¤ ë¨¼ì € 5ê°œì˜ ëŒì„ ë‚˜ì—´í•˜ì„¸ìš”. í‘ëŒì€ 3x3 ê¸ˆìˆ˜ê°€ ì ìš©ë©ë‹ˆë‹¤. ì´ í›ˆë ¨ì€ <strong>ë…¼ë¦¬ì  ì˜ˆì¸¡ ëŠ¥ë ¥</strong>ê³¼ <strong>ê³µê°„ ì§€ê°ë ¥</strong> í–¥ìƒì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.</p>
    </article>

    <section class="mode-selector">
        <button id="btn-ai" class="mode-btn active" onclick="changeMode('ai')">í˜¼ìì—°ìŠµ: AI</button>
        <button id="btn-p2p" class="mode-btn" onclick="changeMode('p2p')">í•¨ê»˜í•˜ê¸°: 2ì¸</button>
    </section>

    <div class="status-box">
        <span id="turnDisplay" aria-live="polite">ì°¨ë¡€: í‘ëŒ â—</span>
        <span id="gameModeText" style="font-size: 0.7rem; color: #888;">AI ëŒ€ê²° ëª¨ë“œ</span>
    </div>

    <div id="canvas-wrapper">
        <canvas id="omokCanvas" aria-label="ì˜¤ëª© íŒ"></canvas>
    </div>
    <div id="msg-area" role="alert"></div>

    <div class="controls">
        <button class="btn btn-undo" onclick="undo()">í•œ ìˆ˜ ë¬´ë¥´ê¸°</button>
        <button class="btn btn-reset" onclick="resetGame()">ìƒˆ ê²Œì„</button>
    </div>
</main>

<footer>
    <p>&copy; 2026 SKZ Brain Lab. AI ë…¼ë¦¬ë ¥ í›ˆë ¨ ì‹œìŠ¤í…œ.</p>
</footer>

<script>
    /* [ê¸°ì¡´ ê²Œì„ ë¡œì§ ìŠ¤í¬ë¦½íŠ¸ ê¸°ë°˜ - ì €ì¥ ë°©ì‹ë§Œ ì—…ë°ì´íŠ¸] */
    const canvas = document.getElementById('omokCanvas');
    const ctx = canvas.getContext('2d');
    const turnDisplay = document.getElementById('turnDisplay');
    const msgArea = document.getElementById('msg-area');
    
    const boardSize = 15;
    let cellSize;
    let board = Array.from(Array(boardSize), () => Array(boardSize).fill(0));
    let moveHistory = [];
    let gameOver = false;
    let currentMode = 'ai'; 
    let currentPlayer = 1;

    function initCanvas() {
        const dpr = window.devicePixelRatio || 1;
        const rect = canvas.getBoundingClientRect();
        canvas.width = rect.width * dpr;
        canvas.height = rect.width * dpr;
        ctx.scale(dpr, dpr);
        cellSize = rect.width / boardSize;
        drawBoard();
    }

    function drawBoard() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.strokeStyle = "#444";
        ctx.lineWidth = 0.5;
        for (let i = 0; i < boardSize; i++) {
            ctx.beginPath();
            ctx.moveTo(cellSize/2, cellSize/2 + i*cellSize);
            ctx.lineTo(canvas.width/devicePixelRatio - cellSize/2, cellSize/2 + i*cellSize);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(cellSize/2 + i*cellSize, cellSize/2);
            ctx.lineTo(cellSize/2 + i*cellSize, canvas.width/devicePixelRatio - cellSize/2);
            ctx.stroke();
        }
        board.forEach((row, y) => row.forEach((val, x) => {
            if(val !== 0) drawStone(x, y, val);
        }));
    }

    function drawStone(x, y, player) {
        ctx.beginPath();
        ctx.arc(cellSize/2 + x*cellSize, cellSize/2 + y*cellSize, cellSize/2 - 4, 0, Math.PI * 2);
        ctx.fillStyle = player === 1 ? "#000" : "#fff";
        ctx.fill();
        if(player === 2) { ctx.strokeStyle = "#ccc"; ctx.stroke(); }
        
        if (moveHistory.length > 0) {
            const last = moveHistory[moveHistory.length - 1];
            if (last.x === x && last.y === y) {
                ctx.beginPath();
                ctx.arc(cellSize/2 + x*cellSize, cellSize/2 + y*cellSize, 3, 0, Math.PI * 2);
                ctx.fillStyle = player === 1 ? "#fff" : "#000";
                ctx.fill();
            }
        }
    }

    function changeMode(mode) {
        currentMode = mode;
        document.getElementById('btn-ai').classList.toggle('active', mode === 'ai');
        document.getElementById('btn-p2p').classList.toggle('active', mode === 'p2p');
        document.getElementById('gameModeText').innerText = mode === 'ai' ? "AI ëŒ€ê²° ëª¨ë“œ" : "2ì¸ ëŒ€ê²° ëª¨ë“œ";
        resetGame();
    }

    function resetGame() {
        board = Array.from(Array(boardSize), () => Array(boardSize).fill(0));
        moveHistory = [];
        gameOver = false;
        currentPlayer = 1;
        turnDisplay.innerText = "ì°¨ë¡€: í‘ëŒ â—";
        msgArea.innerText = "";
        drawBoard();
    }

    canvas.addEventListener('pointerdown', (e) => {
        if(gameOver || (currentMode === 'ai' && currentPlayer === 2)) return;
        const rect = canvas.getBoundingClientRect();
        const x = Math.round((e.clientX - rect.left - cellSize/2) / cellSize);
        const y = Math.round((e.clientY - rect.top - cellSize/2) / cellSize);
        if (x >= 0 && x < boardSize && y >= 0 && y < boardSize && board[y][x] === 0) {
            if (currentMode === 'ai' && currentPlayer === 1 && isDoubleThree(x, y, 1)) {
                msgArea.innerText = "âš ï¸ 3x3 ê¸ˆìˆ˜ ìœ„ì¹˜ì…ë‹ˆë‹¤!";
                return;
            }
            makeMove(x, y);
        }
    });

    function makeMove(x, y) {
        board[y][x] = currentPlayer;
        moveHistory.push({x, y, p: currentPlayer});
        msgArea.innerText = "";
        drawBoard();

        if (checkWin(x, y, currentPlayer)) {
            gameOver = true;
            const winner = currentPlayer === 1 ? "í‘ëŒ" : "ë°±ëŒ";
            turnDisplay.innerText = winner + " ìŠ¹ë¦¬! ğŸ‰";

            // [ìˆ˜ì • í¬ì¸íŠ¸: ë°ì´í„° ì €ì¥ ë¡œì§]
            if (currentMode === 'ai') {
                saveGameResult(currentPlayer === 1);
            } else {
                setTimeout(() => alert(winner + "ì´ ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤!"), 100);
            }
            return;
        }

        currentPlayer = currentPlayer === 1 ? 2 : 1;
        turnDisplay.innerText = `ì°¨ë¡€: ${currentPlayer === 1 ? "í‘ëŒ â—" : "ë°±ëŒ â—‹"}`;
        if (currentMode === 'ai' && currentPlayer === 2) {
            turnDisplay.innerText = "AIê°€ ìƒê° ì¤‘...";
            setTimeout(aiMove, 600);
        }
    }

    // [ì—…ë°ì´íŠ¸ëœ ì €ì¥ í•¨ìˆ˜]
    function saveGameResult(isUserWin) {
        let logicScore = 0;
        if (isUserWin) {
            // ìŠ¹ë¦¬: ê¸°ë³¸ 80ì  + ë¹ ë¥¸ ìŠ¹ë¦¬ ê°€ì‚°ì 
            logicScore = Math.min(100, 80 + Math.floor((100 - moveHistory.length) / 5));
        } else {
            // íŒ¨ë°°: ë²„í‹´ ìˆ˜ì— ë”°ë¥¸ ë…¼ë¦¬ë ¥ (ìµœëŒ€ 60ì )
            logicScore = Math.min(60, Math.floor(moveHistory.length * 1.5));
        }

        // ìµœê·¼ 10íšŒ ê¸°ë¡ ìœ ì§€ ê´€ë¦¬
        let history = JSON.parse(localStorage.getItem('game7_history')) || [];
        history.push(logicScore);
        if (history.length > 10) history.shift();
        
        localStorage.setItem('game7_history', JSON.stringify(history));
        localStorage.setItem('game7_score', logicScore); // ìµœì‹  ì ìˆ˜ ë‹¨ë… ì €ì¥(í•˜ìœ„ í˜¸í™˜)

        // ì´ë™ í™•ì¸ ì•Œë¦¼
        setTimeout(() => {
            const winnerMsg = isUserWin ? "ì¶•í•˜í•©ë‹ˆë‹¤! AIë¥¼ ì´ê²¼ìŠµë‹ˆë‹¤. ğŸ‰" : "ì•„ì‰½ë„¤ìš”! AIê°€ ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤. ğŸ”¥";
            const confirmMsg = `${winnerMsg}\ní˜„ì¬ ë…¼ë¦¬ë ¥ ê¸°ë¡ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.\n\në¶„ì„ ë¦¬í¬íŠ¸ë¥¼ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`;
            if (confirm(confirmMsg)) {
                location.href = 'report.html';
            }
        }, 300);
    }

    function aiMove() {
        if(gameOver) return;
        let bestScore = -1, move = {x: 7, y: 7};
        for(let y=0; y<boardSize; y++) {
            for(let x=0; x<boardSize; x++) {
                if(board[y][x] === 0) {
                    let score = evaluateMove(x, y);
                    if(score > bestScore) { bestScore = score; move = {x, y}; }
                }
            }
        }
        makeMove(move.x, move.y);
    }

    function evaluateMove(x, y) {
        let total = 0;
        [[1,0], [0,1], [1,1], [1,-1]].forEach(([dx, dy]) => {
            total += getLineScore(x, y, dx, dy, 2); 
            total += getLineScore(x, y, dx, dy, 1) * 1.1; 
        });
        return total;
    }

    function getLineScore(x, y, dx, dy, p) {
        let count = 0, block = 0;
        [[dx, dy], [-dx, -dy]].forEach(([sx, sy]) => {
            for (let i = 1; i < 5; i++) {
                let nx = x + sx*i, ny = y + sy*i;
                if (nx>=0 && nx<boardSize && ny>=0 && ny<boardSize) {
                    if (board[ny][nx] === p) count++;
                    else if (board[ny][nx] !== 0) { block++; break; }
                    else break;
                } else { block++; break; }
            }
        });
        if(count >= 4) return 10000;
        if(count === 3) return block === 0 ? 5000 : 500;
        return count * 10;
    }

    function checkWin(x, y, p) {
        const directions = [[1,0], [0,1], [1,1], [1,-1]];
        for (let [dx, dy] of directions) {
            let count = 1;
            [[dx, dy], [-dx, -dy]].forEach(([sx, sy]) => {
                for (let i = 1; i < 5; i++) {
                    let nx = x + sx*i, ny = y + sy*i;
                    if (nx>=0 && nx<boardSize && ny>=0 && ny<boardSize && board[ny][nx] === p) count++;
                    else break;
                }
            });
            if (count >= 5) return true;
        }
        return false;
    }

    function undo() {
        if (gameOver || moveHistory.length === 0) return;
        if (currentMode === 'ai') {
            if (moveHistory.length < 2) return;
            moveHistory.pop(); moveHistory.pop();
            reconstructBoard();
        } else {
            const m = moveHistory.pop();
            board[m.y][m.x] = 0;
            currentPlayer = currentPlayer === 1 ? 2 : 1;
        }
        turnDisplay.innerText = `ì°¨ë¡€: ${currentPlayer === 1 ? "í‘ëŒ â—" : "ë°±ëŒ â—‹"}`;
        drawBoard();
    }

    function reconstructBoard() {
        board = Array.from(Array(boardSize), () => Array(boardSize).fill(0));
        moveHistory.forEach(m => board[m.y][m.x] = m.p);
        currentPlayer = 1;
    }

    function isDoubleThree(x, y, p) {
        let open3 = 0;
        board[y][x] = p;
        [[1,0], [0,1], [1,1], [1,-1]].forEach(([dx, dy]) => {
            let count = 1, openEnds = 0;
            [[dx, dy], [-dx, -dy]].forEach(([sx, sy]) => {
                let space = false;
                for (let i = 1; i <= 4; i++) {
                    let nx = x + sx*i, ny = y + sy*i;
                    if (nx<0||nx>=boardSize||ny<0||ny>=boardSize) break;
                    if (board[ny][nx] === p) { if(!space) count++; else break; }
                    else if (board[ny][nx] === 0) { openEnds++; space = true; break; }
                    else break;
                }
            });
            if(count === 3 && openEnds === 2) open3++;
        });
        board[y][x] = 0;
        return open3 >= 2;
    }

    window.addEventListener('resize', initCanvas);
    initCanvas();
</script>
</body>
</html>
