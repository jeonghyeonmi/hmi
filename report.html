<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ë¸Œë ˆì¸ ë¶„ì„ ë¦¬í¬íŠ¸ | SKZ Brain Lab</title>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { 
            --primary-color: #1a3a5f; 
            --bg-color: #f4f7f9; 
            --accent-color: #d35400; 
            --text-main: #2c3e50;
            --text-muted: #7f8c8d;
            --color-focus: #059669; --color-logic: #2563eb; --color-speed: #be185d;
            --color-memory: #0891b2; --color-math: #d97706; --color-cognition: #7c3aed;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg-color); margin: 0; color: var(--text-main); line-height: 1.6; }

        header { background: var(--primary-color); color: white; padding: 1.2rem; text-align: center; }
        header h1 { margin: 0; font-size: 1.4rem; font-weight: 800; }
        header h1 a { text-decoration: none; color: inherit; }

        nav.main-nav { background: white; padding: 0.8rem; display: flex; justify-content: center; gap: 1.2rem; box-shadow: 0 2px 5px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000; }
        nav.main-nav a { text-decoration: none; color: var(--primary-color); font-weight: bold; font-size: 0.9rem; }
        nav.main-nav a.active { color: var(--accent-color); }

        .container { width: 95%; max-width: 500px; margin: 1.5rem auto; padding-bottom: 50px; }
        
        .report-card { background: white; border-radius: 28px; padding: 30px 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: center; margin-bottom: 20px; }
        .type-name { font-size: 1.7rem; font-weight: 900; color: var(--primary-color); margin-bottom: 5px; }
        .type-name mark { background: transparent; color: var(--accent-color); }
        .score-summary { font-size: 1rem; font-weight: 700; color: var(--text-muted); margin-bottom: 20px; }

        .chart-wrapper { position: relative; margin: 0 auto 25px; max-width: 320px; }

        /* [ì¶”ê°€] ë¸Œë ˆì¸ íƒ€ì… ìƒì„¸ ì„¤ëª… ë°•ìŠ¤ */
        .type-analysis-box { 
            background: #fff9f5; border: 1px solid #ffedd5; border-radius: 20px; 
            padding: 20px; text-align: left; margin-bottom: 25px; word-break: keep-all;
        }
        .analysis-title { font-weight: 800; color: var(--accent-color); margin-bottom: 8px; display: block; font-size: 1rem; }
        .analysis-text { font-size: 0.92rem; color: #475569; line-height: 1.7; }

        /* ê°€ì´ë“œ ì„¹ì…˜ */
        .guide-section { background: white; border-radius: 28px; padding: 25px 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .guide-title { font-size: 1.1rem; font-weight: 800; margin-bottom: 20px; text-align: left; border-left: 4px solid var(--accent-color); padding-left: 12px; }
        
        .category-box { margin-bottom: 24px; text-align: left; }
        .category-label { font-size: 0.9rem; font-weight: 800; margin-bottom: 10px; display: flex; align-items: center; gap: 6px; }
        
        .game-links { display: grid; grid-template-columns: 1fr; gap: 10px; }
        .game-card { 
            background: #f8fafc; padding: 16px; border-radius: 18px; text-decoration: none; 
            color: #334155; font-size: 0.9rem; font-weight: 700; border: 1px solid #e2e8f0;
            display: flex; justify-content: space-between; align-items: center; transition: 0.2s;
        }
        .game-card:hover { border-color: var(--accent-color); background: #fff7ed; transform: translateY(-2px); }
        .game-card .emoji-box { background: white; width: 35px; height: 35px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

        .btn-reset { background: transparent; color: #ccc; font-size: 0.75rem; border: none; cursor: pointer; text-decoration: underline; margin-top: 30px; width: 100%; }
        footer { text-align: center; padding: 2.5rem 0; color: #bbb; font-size: 0.75rem; }
    </style>
</head>
<body>

<header><h1><a href="/">SKZ ë‘ë‡Œ í›ˆë ¨ì†Œ</a></h1></header>

<nav class="main-nav">
    <a href="/">ë¸Œë ˆì¸ ë¶„ì„ì‹¤</a>
    <a href="dash.html">ë‘ë‡Œ í›ˆë ¨ì„¼í„°</a>
    <a href="report.html" class="active">ë‚˜ì˜ ë‘ë‡Œì ìˆ˜</a>
</nav>

<div class="container">
    <main class="report-card">
        <div class="type-name" id="brain-type">ë¶„ì„ ì¤‘...</div>
        <div id="score-summary" class="score-summary">ì¢…í•© ì ìˆ˜ ê³„ì‚° ì¤‘</div>
        
        <div class="chart-wrapper">
            <canvas id="abilityChart"></canvas>
        </div>

        <div class="type-analysis-box" id="analysis-box">
            <span class="analysis-title" id="analysis-title">ë¸Œë ˆì¸ ë¶„ì„ ê²°ê³¼</span>
            <p class="analysis-text" id="analysis-text">í›ˆë ¨ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¹ì‹ ì˜ ë‘ë‡Œ ê°•ì ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
        </div>
    </main>

    <section class="guide-section">
        <div class="guide-title">í•­ëª©ë³„ ì ìˆ˜ ì˜¬ë¦¬ê¸° (ë§ì¶¤ í›ˆë ¨)</div>
        
        <div class="category-box">
            <span class="category-label" style="color: var(--color-focus);">ğŸ¯ ì§‘ì¤‘ë ¥ (Focus)</span>
            <div class="game-links" style="grid-template-columns: 1fr 1fr;">
                <a href="game.html" class="game-card"><div class="emoji-box">ğŸƒ</div>ì¹´ë“œ ì§</a>
                <a href="game8.html" class="game-card"><div class="emoji-box">ğŸ›’</div>ì‹œì¥ ê°€ë©´</a>
            </div>
        </div>

        <div class="category-box">
            <span class="category-label" style="color: var(--color-logic);">ğŸ§© ë…¼ë¦¬ë ¥ (Logic)</span>
            <div class="game-links"><a href="game2.html" class="game-card"><div class="emoji-box">ğŸ”¢</div>ì „ëµ ì¹´ë“œ ë§¤ì¹­</a></div>
        </div>

        <div class="category-box">
            <span class="category-label" style="color: var(--color-cognition);">ğŸ¨ ì¸ì§€ë ¥ (Cognition)</span>
            <div class="game-links"><a href="game6.html" class="game-card"><div class="emoji-box">ğŸŒˆ</div>ìƒ‰ìƒ ì¼ì¹˜ í›ˆë ¨</a></div>
        </div>

        <div class="category-box">
            <span class="category-label" style="color: var(--color-math);">ğŸ”¢ ìˆ˜ë¦¬ë ¥ (Math)</span>
            <div class="game-links"><a href="game5.html" class="game-card"><div class="emoji-box">â•</div>ì¾Œì† ì•”ì‚° í›ˆë ¨</a></div>
        </div>

        <div class="category-box">
            <span class="category-label" style="color: var(--color-speed);">âš¡ ìˆœë°œë ¥ (Speed)</span>
            <div class="game-links"><a href="game3.html" class="game-card"><div class="emoji-box">ğŸ”˜</div>ì¢Œìš° í„°ì¹˜ ë°˜ì‘</a></div>
        </div>

        <div class="category-box">
            <span class="category-label" style="color: var(--color-memory);">ğŸ“ ê¸°ì–µë ¥ (Memory)</span>
            <div class="game-links"><a href="game4.html" class="game-card"><div class="emoji-box">ğŸ’¡</div>ìœ„ì¹˜ ê¸°ì–µ í›ˆë ¨</a></div>
        </div>

        <button class="btn-reset" onclick="resetData()">ëª¨ë“  í›ˆë ¨ ê¸°ë¡ ì´ˆê¸°í™”</button>
    </section>
</div>

<footer>&copy; 2026 SKZ Brain Lab. All rights reserved.</footer>

<script>
    function getAverageScore(gameKeys) {
        let validScores = [];
        gameKeys.forEach(key => {
            const history = JSON.parse(localStorage.getItem(key + '_history')) || [];
            const singleScore = parseInt(localStorage.getItem(key + '_score'));
            if (history.length > 0) validScores.push(...history);
            else if (!isNaN(singleScore) && singleScore > 0) validScores.push(singleScore);
        });
        if (validScores.length === 0) return 0;
        const recent = validScores.slice(-5);
        return Math.round(recent.reduce((a, b) => a + b, 0) / recent.length);
    }

    const scores = {
        focus: getAverageScore(['game1', 'game8']),
        logic: getAverageScore(['game2', 'game7']),
        speed: getAverageScore(['game3']),
        memory: getAverageScore(['game4']),
        math: getAverageScore(['game5']),
        cognition: getAverageScore(['game6'])
    };

    // íƒ€ì…ë³„ ìƒì„¸ ë¶„ì„ ë°ì´í„°
    const brainAnalysis = {
        focus: {
            title: "ì§‘ì¤‘ë ¥ ì¥ì¸ì˜ íŠ¹ì§•",
            desc: "ë‹¹ì‹ ì€ ì£¼ë³€ì˜ ì†ŒìŒì´ë‚˜ ë°©í•´ ìš”ì†Œì— í”ë“¤ë¦¬ì§€ ì•Šê³  ëª©í‘œì— ëª°ì…í•˜ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤. ë³µì¡í•œ ì—…ë¬´ë„ ëˆê¸° ìˆê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì •êµí•œ ë‡Œë¥¼ ê°€ì¡ŒìŠµë‹ˆë‹¤."
        },
        logic: {
            title: "ì „ëµê°€ì˜ íŠ¹ì§•",
            desc: "ì •ë³´ë“¤ ì‚¬ì´ì˜ ì¸ê³¼ê´€ê³„ë¥¼ íŒŒì•…í•˜ê³  ìµœì ì˜ ê²½ë¡œë¥¼ ì°¾ì•„ë‚´ëŠ” ë…¼ë¦¬ì  ì¶”ë¡  ëŠ¥ë ¥ì´ ê°•ì ì…ë‹ˆë‹¤. ì²´ê³„ì ì¸ ì‚¬ê³ ë¥¼ í†µí•´ ì‹¤ìˆ˜ë¥¼ ìµœì†Œí™”í•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤."
        },
        speed: {
            title: "ë‚ ë µí•œ ì¹˜íƒ€ì˜ íŠ¹ì§•",
            desc: "ìˆœë°œë ¥ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤! ì‹œê°ì  ìê·¹ì„ ë‡Œì—ì„œ ê·¼ìœ¡ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ë°˜ì‘ ì†ë„ê°€ íƒ€ì¸ë³´ë‹¤ ì••ë„ì ìœ¼ë¡œ ë¹ ë¥´ë©°, ìˆœê°„ì ì¸ íŒë‹¨ë ¥ì´ í•„ìš”í•œ ìƒí™©ì— ê°•í•©ë‹ˆë‹¤."
        },
        memory: {
            title: "í˜„ìì˜ íŠ¹ì§•",
            desc: "í•œ ë²ˆ ì…ë ¥ëœ ì‹œê°ì /ê³µê°„ì  ì •ë³´ë¥¼ ë‡Œì— ì¼ì‹œ ì €ì¥í•˜ê³  ë‹¤ì‹œ êº¼ë‚´ëŠ” ëŠ¥ë ¥ì´ ë§¤ìš° ì¢‹ìŠµë‹ˆë‹¤. ë‹¨ê¸° ê¸°ì–µì„ ì¥ê¸° ê¸°ì–µìœ¼ë¡œ ì „í™˜í•˜ëŠ” ëŠ¥ë ¥ì´ ë°œë‹¬í•´ ìˆìŠµë‹ˆë‹¤."
        },
        math: {
            title: "ìˆ˜í•™ìì˜ íŠ¹ì§•",
            desc: "ìˆ«ìì™€ ê¸°í˜¸ì— ëŒ€í•œ ì§ê´€ì´ ë‚¨ë‹¤ë¦…ë‹ˆë‹¤. ë³µì¡í•œ ìˆ˜ì¹˜ë¥¼ ë¹ ë¥´ê²Œ ì—°ì‚°í•˜ê³  ì–‘ì ì¸ ê°ê°ì„ í™œìš©í•´ ìƒí™©ì„ ê°ê´€ì ìœ¼ë¡œ íŒŒì•…í•˜ëŠ” ìˆ˜ë¦¬ì  ì‚¬ê³ ì˜ ì†Œìœ ìì…ë‹ˆë‹¤."
        },
        cognition: {
            title: "ê´€ì°°ìì˜ íŠ¹ì§•",
            desc: "ìƒ‰ìƒ, í˜•íƒœ, ì˜ë¯¸ ì‚¬ì´ì˜ ì¶©ëŒ(ìŠ¤íŠ¸ë£¹ í˜„ìƒ)ì„ ì´ê²¨ë‚´ê³  ë³¸ì§ˆì„ ê¿°ëš«ì–´ ë³´ëŠ” ì¸ì§€ ì œì–´ë ¥ì´ ë†’ìŠµë‹ˆë‹¤. ê³ ì •ê´€ë…ì— ë¹ ì§€ì§€ ì•ŠëŠ” ìœ ì—°í•œ ì‚¬ê³ ê°€ íŠ¹ì§•ì…ë‹ˆë‹¤."
        }
    };

    const ctx = document.getElementById('abilityChart').getContext('2d');
    new Chart(ctx, {
        type: 'radar',
        data: {
            labels: ['ì§‘ì¤‘ë ¥', 'ë…¼ë¦¬ë ¥', 'ìˆœë°œë ¥', 'ê¸°ì–µë ¥', 'ìˆ˜ë¦¬ë ¥', 'ì¸ì§€ë ¥'],
            datasets: [{
                data: [scores.focus, scores.logic, scores.speed, scores.memory, scores.math, scores.cognition],
                backgroundColor: 'rgba(211, 84, 0, 0.1)', borderColor: 'rgba(211, 84, 0, 1)', borderWidth: 2, pointRadius: 4
            }]
        },
        options: {
            scales: { r: { suggestedMin: 0, suggestedMax: 100, ticks: { display: false }, pointLabels: { font: { size: 12, weight: '700' } } } },
            plugins: { legend: { display: false } }
        }
    });

    const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
    const avgScore = Math.floor(totalScore / 6);
    const brainTypeElem = document.getElementById('brain-type');
    const summaryElem = document.getElementById('score-summary');
    const analysisTitle = document.getElementById('analysis-title');
    const analysisText = document.getElementById('analysis-text');

    if (totalScore === 0) {
        brainTypeElem.innerHTML = "ìƒˆë‚´ê¸° <mark>í›ˆë ¨ì‚¬</mark>";
        summaryElem.innerText = "ê²Œì„ì„ í”Œë ˆì´í•˜ë©´ ë¶„ì„ì´ ì‹œì‘ë©ë‹ˆë‹¤!";
    } else {
        const maxVal = Math.max(...Object.values(scores));
        const best = Object.keys(scores).find(key => scores[key] === maxVal);
        
        const typeNames = {
            focus: "ëª°ì…í•˜ëŠ” <mark>ì¥ì¸</mark>",
            logic: "ì¹˜ë°€í•œ <mark>ì „ëµê°€</mark>",
            speed: "ë‚ ë µí•œ <mark>ì¹˜íƒ€</mark>",
            memory: "ê¸°ë¡í•˜ëŠ” <mark>í˜„ì</mark>",
            math: "ëƒ‰ì² í•œ <mark>ìˆ˜í•™ì</mark>",
            cognition: "ê¹¨ì–´ìˆëŠ” <mark>ê´€ì°°ì</mark>"
        };

        brainTypeElem.innerHTML = typeNames[best] || "ê· í˜•ì¡íŒ <mark>ëŠ¥ë ¥ì</mark>";
        summaryElem.innerText = `ì¢…í•© ë‘ë‡Œ ì§€ìˆ˜: ${avgScore}ì `;
        
        // ë¶„ì„ ê²°ê³¼ í…ìŠ¤íŠ¸ ì‚½ì…
        analysisTitle.innerText = brainAnalysis[best].title;
        analysisText.innerText = brainAnalysis[best].desc;
    }

    function resetData() { 
        if(confirm("ëª¨ë“  ê¸°ë¡ì„ ì‚­ì œí• ê¹Œìš”?")) { localStorage.clear(); location.reload(); } 
    }
</script>
</body>
</html>
