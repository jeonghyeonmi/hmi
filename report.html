<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¸Œë ˆì¸ ë¦¬í¬íŠ¸ | SKZ Brain Lab</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --primary-color: #1a3a5f; --bg-color: #f4f7f9; --accent-color: #d35400; }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg-color); margin: 0; padding: 0; color: #333; }
        
        header { background: var(--primary-color); color: white; padding: 1.2rem; text-align: center; }
        header h1 { margin: 0; font-size: 1.3rem; }
        header h1 a { text-decoration: none; color: inherit; }

        nav { background: white; padding: 0.8rem; display: flex; justify-content: center; gap: 1.2rem; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        nav a { text-decoration: none; color: var(--primary-color); font-weight: bold; font-size: 0.9rem; }

        .container { max-width: 600px; margin: 1.5rem auto; padding: 0 15px; }
        
        .report-card { background: white; border-radius: 24px; padding: 2rem; box-shadow: 0 10px 30px rgba(0,0,0,0.05); text-align: center; margin-bottom: 1.5rem; }
        
        .user-type { font-size: 1.1rem; color: #666; margin-bottom: 0.5rem; }
        .type-name { font-size: 1.8rem; font-weight: 900; color: var(--primary-color); margin-bottom: 1.5rem; }
        .type-name mark { background: none; color: var(--accent-color); }

        .chart-container { position: relative; margin: 0 auto 2rem; height: 300px; width: 300px; }

        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 2rem; }
        .stat-item { background: #f8f9fa; padding: 15px; border-radius: 16px; text-align: left; }
        .stat-label { font-size: 0.8rem; color: #888; display: block; }
        .stat-value { font-size: 1.1rem; font-weight: bold; color: var(--primary-color); }

        .btn-retry { display: block; background: var(--primary-color); color: white; padding: 18px; border-radius: 15px; text-decoration: none; font-weight: bold; margin-bottom: 1rem; }
        .btn-reset { display: block; background: #eee; color: #666; padding: 10px; border-radius: 10px; text-decoration: none; font-size: 0.8rem; margin-top: 10px; }

        footer { text-align: center; padding: 2rem; color: #aaa; font-size: 0.8rem; }
    </style>
</head>
<body>

<header><h1><a href="index.html">ğŸ§  SKZ Brain Lab</a></h1></header>

<nav>
    <a href="index.html">í™ˆ</a>
    <a href="game.html">í›ˆë ¨ì‹¤</a>
    <a href="report.html" style="color:var(--accent-color); border-bottom:2px solid var(--accent-color);">ë¦¬í¬íŠ¸</a>
    <a href="post1.html">ë¶„ì„ì‹¤</a>
</nav>

<div class="container">
    <div class="report-card">
        <p class="user-type">ë‹¹ì‹ ì˜ ë¸Œë ˆì¸ íƒ€ì…ì€</p>
        <div class="type-name" id="brain-type">ë¶„ì„ ì¤‘...</div>
        
        <div class="chart-container">
            <canvas id="abilityChart"></canvas>
        </div>

        <div class="stat-grid" id="stat-summary"></div>

        <p id="type-desc" style="color: #555; font-size: 0.95rem; line-height: 1.6; margin-bottom: 2rem; padding: 0 10px; word-break: keep-all;"></p>

        <a href="index.html" class="btn-retry">ë‹¤ë¥¸ í›ˆë ¨ ë” í•˜ê¸°</a>
        <a href="#" class="btn-reset" onclick="resetData()">ë°ì´í„° ì´ˆê¸°í™”</a>
    </div>
</div>

<footer>&copy; 2026 SKZ Brain Lab. ì¢…í•© ì¸ì§€ ëŠ¥ë ¥ ë¶„ì„</footer>

<script>
    // 1. ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ë° ì •ê·œí™” (ëª¨ë“  ê²Œì„ì˜ ì ìˆ˜ë¥¼ 0~100 ì‚¬ì´ë¡œ í™˜ì‚°)
    // ê²Œì„ì„ ì•ˆ í–ˆì„ ê²½ìš° 0ì ìœ¼ë¡œ í‘œì‹œë˜ë„ë¡ ìˆ˜ì •
    const rawScores = {
        focus: localStorage.getItem('game1_score'),
        logic: localStorage.getItem('game2_score'),
        speed: localStorage.getItem('game3_score'),
        memory: localStorage.getItem('game4_score'),
        math: localStorage.getItem('game5_score'),
        cognition: localStorage.getItem('game6_score')
    };

    const scores = {
        focus: parseInt(rawScores.focus) || 0,
        logic: parseInt(rawScores.logic) || 0,
        speed: parseInt(rawScores.speed) || 0,
        memory: parseInt(rawScores.memory) || 0,
        math: parseInt(rawScores.math) || 0,
        cognition: parseInt(rawScores.cognition) || 0
    };

    // 2. ê·¸ë˜í”„ ê·¸ë¦¬ê¸° (Chart.js)
    const ctx = document.getElementById('abilityChart').getContext('2d');
    new Chart(ctx, {
        type: 'radar',
        data: {
            labels: ['ì§‘ì¤‘ë ¥', 'ë…¼ë¦¬ë ¥', 'ìˆœë°œë ¥', 'ê¸°ì–µë ¥', 'ìˆ˜ë¦¬ë ¥', 'ì¸ì§€ë ¥'],
            datasets: [{
                label: 'ë‚´ ëŠ¥ë ¥ì¹˜',
                data: [scores.focus, scores.logic, scores.speed, scores.memory, scores.math, scores.cognition],
                backgroundColor: 'rgba(211, 84, 0, 0.2)',
                borderColor: 'rgba(211, 84, 0, 1)',
                borderWidth: 2,
                pointBackgroundColor: 'rgba(211, 84, 0, 1)',
                pointRadius: 3
            }]
        },
        options: {
            scales: {
                r: {
                    angleLines: { display: true },
                    suggestedMin: 0,
                    suggestedMax: 100,
                    ticks: { stepSize: 20, display: false }
                }
            },
            plugins: { legend: { display: false } }
        }
    });

    // 3. íƒ€ì… ì§„ë‹¨ ë¡œì§
    const brainTypeElem = document.getElementById('brain-type');
    const descElem = document.getElementById('type-desc');
    
    // ì ìˆ˜ê°€ ëª¨ë‘ 0ì ì¸ ê²½ìš° ì²˜ë¦¬
    const totalScore = Object.values(scores).reduce((a, b) => a + b, 0);
    
    if (totalScore === 0) {
        brainTypeElem.innerHTML = "ìƒˆë‚´ê¸° <mark>í›ˆë ¨ì‚¬</mark>";
        descElem.innerText = "ì•„ì§ ì¶©ë¶„í•œ ë°ì´í„°ê°€ ìŒ“ì´ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê²Œì„ì„ í”Œë ˆì´í•˜ê³  ë‹¹ì‹ ì˜ ëŠ¥ë ¥ì„ í™•ì¸í•˜ì„¸ìš”!";
    } else {
        const maxVal = Math.max(...Object.values(scores));
        const bestAbility = Object.keys(scores).find(key => scores[key] === maxVal);

        let typeName = "";
        let description = "";

        if(bestAbility === 'math') {
            typeName = "ëƒ‰ì² í•œ <mark>ìˆ˜í•™ì</mark>";
            description = "ìˆ˜ì¹˜ì™€ ê³„ì‚°ì— ë§¤ìš° ê°•ì ì„ ë³´ì…ë‹ˆë‹¤. ë³µì¡í•œ ë°ì´í„° ì†ì—ì„œ ì •ë‹µì„ ì°¾ì•„ë‚´ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•˜ì‹œë„¤ìš”!";
        } else if(bestAbility === 'speed' || bestAbility === 'cognition') {
            typeName = "ì§ê´€ì ì¸ <mark>ì‚¬ëƒ¥ê¾¼</mark>";
            description = "ë°˜ì‘ ì†ë„ì™€ ìƒí™© ì¸ì§€ ëŠ¥ë ¥ì´ ìµœê³  ìˆ˜ì¤€ì…ë‹ˆë‹¤. ìœ„ê¸° ìƒí™©ì—ì„œ ë³¸ëŠ¥ì ìœ¼ë¡œ ì˜¬ë°”ë¥¸ íŒë‹¨ì„ ë‚´ë¦¬ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.";
        } else if(bestAbility === 'memory') {
            typeName = "ê¸°ë¡í•˜ëŠ” <mark>ì‚¬ì„œ</mark>";
            description = "íƒì›”í•œ ê¸°ì–µë ¥ì„ ë°”íƒ•ìœ¼ë¡œ ì •ë³´ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤. ë‚¨ë“¤ì´ ë†“ì¹˜ëŠ” ì‘ì€ ë””í…Œì¼ë„ ê¸°ì–µí•´ë‚´ëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤.";
        } else if(bestAbility === 'focus') {
            typeName = "ì§‘ìš”í•œ <mark>ëª…ì‚¬ìˆ˜</mark>";
            description = "í•˜ë‚˜ì— ëª°ì…í•˜ë©´ ì£¼ë³€ì˜ ì†ŒìŒë„ ìŠì–´ë²„ë¦¬ëŠ” ë†€ë¼ìš´ ì§‘ì¤‘ë ¥ì˜ ì†Œìœ ìì…ë‹ˆë‹¤. ê³¼ì œ ì™„ìˆ˜ ëŠ¥ë ¥ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤.";
        } else {
            typeName = "ê· í˜• ì¡íŒ <mark>ì „ëµê°€</mark>";
            description = "ëª¨ë“  ëŠ¥ë ¥ì´ ì¡°í™”ë¡­ê²Œ ë°œë‹¬í–ˆìŠµë‹ˆë‹¤. ìƒí™©ì„ ë‹¤ê°ë„ë¡œ ë¶„ì„í•˜ê³  ìœ ì—°í•œ ì „ëµì„ ì„¸ìš°ëŠ” ë° ëŠ¥ìˆ™í•©ë‹ˆë‹¤.";
        }

        brainTypeElem.innerHTML = typeName;
        descElem.innerText = description;
    }

    // 4. ìš”ì•½ ìˆ˜ì¹˜ í‘œì‹œ
    const avgScore = Math.floor(totalScore / 6);
    const summaryElem = document.getElementById('stat-summary');
    summaryElem.innerHTML = `
        <div class="stat-item">
            <span class="stat-label">ë‚˜ì˜ ìµœëŒ€ ê°•ì </span>
            <span class="stat-value">${totalScore === 0 ? '-' : brainTypeElem.innerText}</span>
        </div>
        <div class="stat-item">
            <span class="stat-label">ë¸Œë ˆì¸ í‰ê·  ì ìˆ˜</span>
            <span class="stat-value">${avgScore}ì </span>
        </div>
    `;

    function resetData() {
        if(confirm("ëª¨ë“  í›ˆë ¨ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            localStorage.clear();
            location.reload();
        }
    }
</script>
</body>
</html>
