<main class="container">
    <div class="game-guide">
        <strong>📝 훈련 규칙:</strong> 같은 모양의 카드 짝을 모두 찾으세요. 모든 짝을 맞추면 나의 집중력 기록이 일지에 저장됩니다.
    </div>
    <div class="grade-info">
        <div class="grade-item"><span class="grade-star">★★★</span><span>25초 미만</span></div>
        <div class="grade-item"><span class="grade-star">★★</span><span>35초 미만</span></div>
        <div class="grade-item"><span class="grade-star">★</span><span>제한 없음</span></div>
    </div>
    <span id="timer">0.00</span>
    <div id="gameBoard" class="game-board"></div>
    
    <div class="ranking-container">
        <div class="ranking-title">📊 나의 집중력 기록 일지</div>
        <div id="best-record" style="font-size: 0.9rem; color: #e67e22; margin-bottom: 10px; font-weight: bold;">최고 기록: -</div>
        <table class="rank-table">
            <thead><tr><th>회차</th><th>날짜</th><th>기록</th></tr></thead>
            <tbody id="rankingBody"></tbody>
        </table>
        <button onclick="clearHistory('memoryHistory')" style="margin-top:15px; background:none; border:none; color:#ccc; font-size:0.7rem; text-decoration:underline;">기록 초기화</button>
    </div>
</main>

<script>
    // ... 카드 생성 로직 동일 ...
    function endGame() {
        clearInterval(timerInterval);
        const time = parseFloat(document.getElementById('timer').innerText);
        const now = new Date();
        const dateStr = `${now.getMonth()+1}/${now.getDate()} ${now.getHours()}:${now.getMinutes()}`;
        
        let history = JSON.parse(localStorage.getItem('memoryHistory')) || [];
        let best = history.length > 0 ? Math.min(...history.map(h => h.time)) : 999;
        
        let msg = `성공! 기록: ${time}초`;
        if (time < best) msg = `🎉 최고 기록 경신! : ${time}초`;
        
        history.unshift({ date: dateStr, time: time });
        localStorage.setItem('memoryHistory', JSON.stringify(history.slice(0, 10)));
        
        alert(msg);
        displayHistory();
        initGame();
    }

    function displayHistory() {
        const body = document.getElementById('rankingBody');
        const history = JSON.parse(localStorage.getItem('memoryHistory')) || [];
        if(history.length > 0) {
            const best = Math.min(...history.map(h => h.time));
            document.getElementById('best-record').innerText = `⭐ 나의 최고 기록: ${best}초`;
            body.innerHTML = history.map((h, i) => `<tr><td>${history.length-i}회</td><td>${h.date}</td><td>${h.time}s</td></tr>`).join('');
        } else {
            body.innerHTML = '<tr><td colspan="3">아직 기록이 없습니다.</td></tr>';
        }
    }
    function clearHistory(key) { if(confirm("지울까요?")) { localStorage.removeItem(key); location.reload(); } }
    displayHistory();
</script>
