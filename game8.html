<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>N-Back ê¸°ì–µë ¥ í›ˆë ¨: ì‘ì—… ê¸°ì–µë ¥ í–¥ìƒ ê²Œì„ | SKZ Brain Lab</title>
    <meta name="description" content="ì¸ì§€ì‹¬ë¦¬í•™ ê¸°ë°˜ N-Back ê¸°ì–µë ¥ í›ˆë ¨. 2ë‹¨ê³„ ì „ ìˆ«ìë¥¼ ê¸°ì–µí•˜ì—¬ ì‘ì—… ê¸°ì–µë ¥(Working Memory)ê³¼ ì§‘ì¤‘ë ¥ì„ í–¥ìƒì‹œí‚¤ì„¸ìš”. ë‹¹ì‹ ì˜ ë‘ë‡Œ ë“±ê¸‰ì„ í™•ì¸í•´ë³´ì„¸ìš”.">
    <meta name="keywords" content="N-Back, ì—”ë°±, ê¸°ì–µë ¥í›ˆë ¨, ì‘ì—…ê¸°ì–µë ¥, ë‘ë‡Œê²Œì„, ì§‘ì¤‘ë ¥í–¥ìƒ, ì¸ì§€ëŠ¥ë ¥, SKZBrainLab">
    <link rel="canonical" href="https://jeonghyeonmi.github.io/hmi/game8.html">

    <meta property="og:type" content="website">
    <meta property="og:title" content="ë‹¹ì‹ ì˜ ë‘ë‡Œ ë“±ê¸‰ì€? N-Back ê¸°ì–µë ¥ í›ˆë ¨">
    <meta property="og:description" content="ê³¼í•™ì ì¸ ë‘ë‡Œ í›ˆë ¨ë²•, N-Back ê²Œì„ìœ¼ë¡œ ì‘ì—… ê¸°ì–µë ¥ í•œê³„ì— ë„ì „í•˜ì„¸ìš”.">
    <meta property="og:url" content="https://jeonghyeonmi.github.io/hmi/game8.html">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "N-Back ê¸°ì–µë ¥ í›ˆë ¨",
      "operatingSystem": "Web",
      "applicationCategory": "EducationalApplication",
      "genre": "Brain Training",
      "description": "N-Back í›ˆë ¨ì„ í†µí•´ ì‘ì—… ê¸°ì–µë ¥ê³¼ ì§‘ì¤‘ë ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ì¸ì§€ í›ˆë ¨ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "KRW"
      }
    }
    </script>

    <style>
        :root { --primary-color: #1a3a5f; --bg-color: #f4f7f9; --accent-color: #27ae60; --error-color: #e74c3c; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Pretendard', sans-serif; background-color: var(--bg-color); color: #333; overflow-x: hidden; }
        
        header { background: var(--primary-color); color: white; padding: 1.2rem; text-align: center; }
        header h1 { margin: 0; font-size: 1.4rem; font-weight: 800; }
        header h1 a { text-decoration: none; color: inherit; }

        nav.main-nav { background: white; padding: 0.8rem; display: flex; justify-content: center; gap: 1.2rem; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        nav.main-nav a { text-decoration: none; color: var(--primary-color); font-weight: bold; font-size: 0.9rem; }
        nav.main-nav a.active { color: var(--accent-color); border-bottom: 2px solid var(--accent-color); }

        .game-container {
            width: 94%; max-width: 500px; margin: 1.5rem auto; padding: 25px;
            background: white; border-radius: 24px; box-shadow: 0 10px 40px rgba(0,0,0,0.04);
            text-align: center;
        }

        .game-guide { text-align: left; background: #f8fafc; padding: 15px; border-radius: 15px; margin-bottom: 20px; font-size: 0.85rem; line-height: 1.6; border-left: 4px solid var(--accent-color); }

        .display-area {
            height: 180px; background: #2c3e50; border-radius: 20px;
            display: flex; justify-content: center; align-items: center;
            margin-bottom: 20px; position: relative; transition: all 0.2s;
        }
        #number-display { font-size: 5.5rem; font-weight: 900; color: #fff; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }

        /* í”¼ë“œë°± íš¨ê³¼ */
        .correct-flash { background-color: #27ae60 !important; transform: scale(1.03); }
        .wrong-flash { background-color: #e74c3c !important; animation: shake 0.3s cubic-bezier(.36,.07,.19,.97) both; }
        
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        .match-btn { 
            width: 100%; padding: 22px; background: var(--primary-color); color: white; border: none; 
            border-radius: 18px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: 0.1s;
        }
        .btn-start { width: 100%; padding: 18px; background: var(--accent-color); color: white; border: none; border-radius: 30px; font-weight: bold; font-size: 1.1rem; cursor: pointer; }

        #timer-bar { width: 100%; height: 8px; background: #eee; border-radius: 4px; margin-bottom: 15px; overflow: hidden; }
        #timer-fill { width: 100%; height: 100%; background: var(--accent-color); transition: width 0.1s linear; }

        footer { text-align: center; padding: 2rem 0; color: #bbb; font-size: 0.8rem; }
    </style>
</head>
<body>

<header><h1><a href="index.html">SKZ ë‘ë‡Œ í›ˆë ¨ì†Œ</a></h1></header>

<nav class="main-nav">
    <a href="index.html">í™ˆ</a>
    <a href="game.html" class="active">ì§‘ì¤‘ë ¥</a>
    <a href="game2.html">ë…¼ë¦¬ë ¥</a>
    <a href="game3.html">íŒë‹¨ë ¥</a>
    <a href="report.html">ë¦¬í¬íŠ¸</a>
</nav>

<main class="game-container">
    <section class="game-guide">
        <h2 style="font-size: 1rem; margin: 0 0 5px 0;">ğŸ§  N-Back í›ˆë ¨ë²•</h2>
        í˜„ì¬ ìˆ«ìê°€ <strong>2ë‹¨ê³„ ì „</strong> ìˆ«ìì™€ ê°™ìœ¼ë©´ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”. 
        <br><small>(ì˜ˆ: 4 â†’ 1 â†’ 4 ê°€ ë‚˜ì™”ì„ ë•Œ ë§ˆì§€ë§‰ 4ì—ì„œ í´ë¦­!)</small>
    </section>

    <div style="display: flex; justify-content: space-between; font-weight: bold; margin-bottom: 10px;">
        <span style="color:var(--accent-color)">Level: 2-Back</span>
        <span>Score: <span id="score">0</span></span>
    </div>
    
    <div id="timer-bar"><div id="timer-fill"></div></div>

    <section id="display-box" class="display-area" aria-live="polite">
        <div id="number-display">READY</div>
    </section>

    <div id="action-zone" style="display:none;">
        <button class="match-btn" onclick="handleMatch()">ì§€ê¸ˆ ìˆ«ìì™€ 2ë‹¨ê³„ ì „ì´ ì¼ì¹˜!</button>
    </div>

    <div id="setup-zone">
        <button class="btn-start" onclick="startGame()">í›ˆë ¨ ì‹œì‘ (40ì´ˆ)</button>
    </div>
</main>

<footer>&copy; 2026 SKZ Brain Lab. ê³¼í•™ì  ë‘ë‡Œ í›ˆë ¨ í”„ë¡œê·¸ë¨.</footer>

<script>
    let n = 2;
    let sequence = [];
    let score = 0;
    let isGameActive = false;
    let hasPressedCurrent = false;
    let cycleTimer = null;
    let timeLeft = 40;
    const CYCLE_TIME = 1800; // ìˆ«ìê°€ ë¨¸ë¬´ëŠ” ì‹œê°„

    const displayBox = document.getElementById('display-box');
    const numberDisplay = document.getElementById('number-display');
    const scoreDisplay = document.getElementById('score');
    const timerFill = document.getElementById('timer-fill');

    function startGame() {
        if(isGameActive) return;
        isGameActive = true;
        score = 0;
        sequence = [];
        timeLeft = 40;
        scoreDisplay.innerText = "0";
        document.getElementById('setup-zone').style.display = 'none';
        document.getElementById('action-zone').style.display = 'block';
        
        updateGlobalTimer();
        runNextCycle();
    }

    function updateGlobalTimer() {
        let total = 40;
        let current = total;
        const interval = setInterval(() => {
            current -= 0.1;
            timerFill.style.width = (current / total * 100) + "%";
            if (current <= 0 || !isGameActive) clearInterval(interval);
        }, 100);
    }

    function runNextCycle() {
        if (!isGameActive) return;
        if (timeLeft <= 0) { endGame(); return; }

        timeLeft -= (CYCLE_TIME / 1000);
        hasPressedCurrent = false;
        displayBox.className = 'display-area';

        // SEOë¥¼ ê³ ë ¤í•˜ì—¬ 30% í™•ë¥ ë¡œ ì •ë‹µ ìœ ë„ (ì¸ì§€ ë¶€í•˜ ìœ ì§€)
        let nextNum;
        if (sequence.length >= n && Math.random() < 0.3) {
            nextNum = sequence[sequence.length - n];
        } else {
            nextNum = Math.floor(Math.random() * 9) + 1;
        }

        sequence.push(nextNum);
        numberDisplay.innerText = nextNum;

        clearTimeout(cycleTimer);
        cycleTimer = setTimeout(runNextCycle, CYCLE_TIME);
    }

    function handleMatch() {
        if (!isGameActive || hasPressedCurrent) return;
        hasPressedCurrent = true;

        const current = sequence[sequence.length - 1];
        const target = sequence[sequence.length - (n + 1)];

        // ê²€ì¦ ë° ì¦‰ê° í”¼ë“œë°±
        if (sequence.length > n && current === target) {
            score += 10;
            triggerFeedback('correct-flash');
            // ë§íˆë©´ ê¸°ë¶„ ì¢‹ê²Œ ë‹¤ìŒìœ¼ë¡œ ì•½ê°„ ë” ë¹¨ë¦¬ ì „í™˜
            clearTimeout(cycleTimer);
            setTimeout(runNextCycle, 500);
        } else {
            score = Math.max(0, score - 5);
            triggerFeedback('wrong-flash');
            // í‹€ë¦¬ë©´ ë‹¤ìŒìœ¼ë¡œ ì•½ê°„ ë” ë¹¨ë¦¬ ì „í™˜
            clearTimeout(cycleTimer);
            setTimeout(runNextCycle, 500);
        }
        scoreDisplay.innerText = score;
    }

    function triggerFeedback(className) {
        displayBox.classList.add(className);
        setTimeout(() => displayBox.classList.remove(className), 400);
    }

    function endGame() {
        isGameActive = false;
        clearTimeout(cycleTimer);
        numberDisplay.innerText = "ì¢…ë£Œ";
        document.getElementById('setup-zone').style.display = 'block';
        document.getElementById('action-zone').style.display = 'none';
        
        // ë¦¬í¬íŠ¸ìš© ì ìˆ˜ ì €ì¥
        localStorage.setItem('game8_score', score);
        alert(`í›ˆë ¨ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\nìµœì¢… ì ìˆ˜: ${score}ì `);
    }
</script>
</body>
</html>
