<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>N-Back ê¸°ì–µë ¥ í›ˆë ¨: ì‘ì—… ê¸°ì–µë ¥ í–¥ìƒ ê²Œì„ | SKZ Brain Lab</title>
    <meta name="description" content="ë‘ë‡Œì˜ 'ì‘ì—… ê¸°ì–µë ¥(Working Memory)'ì„ ê·¹ëŒ€í™”í•˜ëŠ” N-Back í›ˆë ¨. ì¸ì§€ ëŠ¥ë ¥ì„ í…ŒìŠ¤íŠ¸í•˜ê³  ì§‘ì¤‘ë ¥ ë“±ê¸‰ì„ í™•ì¸í•˜ì„¸ìš”.">
    <meta name="keywords" content="N-Back, ì—”ë°±, ê¸°ì–µë ¥í›ˆë ¨, ì‘ì—…ê¸°ì–µë ¥, ë‘ë‡Œê²Œì„, ì§‘ì¤‘ë ¥í–¥ìƒ, SKZBrainLab">
    <link rel="canonical" href="https://jeonghyeonmi.github.io/hmi/game8.html">

    <style>
        :root { --primary-color: #1a3a5f; --bg-color: #f4f7f9; --accent-color: #27ae60; --error-color: #e74c3c; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; font-family: 'Pretendard', sans-serif; background-color: var(--bg-color); color: #333; }
        
        header { background: var(--primary-color); color: white; padding: 1.2rem; text-align: center; }
        header h1 { margin: 0; font-size: 1.4rem; font-weight: 800; }
        header h1 a { text-decoration: none; color: inherit; }

        nav.main-nav { 
            background: white; padding: 0.8rem; display: flex; justify-content: center; gap: 1.2rem; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000;
        }
        nav.main-nav a { text-decoration: none; color: var(--primary-color); font-weight: bold; font-size: 0.9rem; }
        nav.main-nav a.active { color: var(--accent-color); border-bottom: 2px solid var(--accent-color); }

        .sub-nav { display: flex; justify-content: center; gap: 15px; padding: 12px 0; background: #fff; border-bottom: 1px solid #eee; font-size: 0.75rem; }
        .sub-nav a { text-decoration: none; color: #aaa; font-weight: 500; }
        .sub-nav a.current { color: var(--accent-color); font-weight: bold; }

        .game-container {
            width: 94%; max-width: 500px; margin: 1.5rem auto; padding: 25px;
            background: white; border-radius: 24px; box-shadow: 0 10px 40px rgba(0,0,0,0.04);
            text-align: center;
        }

        .game-guide { text-align: left; background: #f8fafc; padding: 15px; border-radius: 15px; margin-bottom: 20px; font-size: 0.85rem; line-height: 1.5; border-left: 4px solid var(--accent-color); }
        
        .display-area {
            height: 180px; background: #2c3e50; border-radius: 20px;
            display: flex; justify-content: center; align-items: center;
            margin-bottom: 30px; position: relative; overflow: hidden;
        }
        #number-display { font-size: 5rem; font-weight: 900; color: #fff; }

        .match-btn { 
            width: 100%; padding: 22px; background: var(--primary-color); color: white; border: none; 
            border-radius: 18px; font-size: 1.2rem; font-weight: bold; cursor: pointer; transition: 0.1s;
        }
        .match-btn:active { transform: scale(0.98); opacity: 0.9; }

        .btn-start { 
            width: 100%; padding: 18px; background: var(--accent-color); color: white; 
            border: none; border-radius: 30px; font-weight: bold; font-size: 1.1rem; cursor: pointer;
        }

        .ranking-box { margin-top: 30px; padding-top: 20px; border-top: 2px dashed #eee; text-align: left; }
        
        /* í”¼ë“œë°± íš¨ê³¼ */
        .correct { background-color: #27ae60 !important; }
        .wrong { background-color: #e74c3c !important; }

        footer { text-align: center; padding: 2rem 0; color: #bbb; font-size: 0.8rem; }
    </style>
</head>
<body>

<header><h1><a href="index.html">SKZ ë‘ë‡Œ í›ˆë ¨ì†Œ</a></h1></header>

<nav class="main-nav">
    <a href="index.html">í™ˆ</a>
    <a href="game.html" class="active">ì§‘ì¤‘ë ¥</a>
    <a href="game2.html">ë…¼ë¦¬ë ¥</a>
    <a href="game3.html">íŒë‹¨ë ¥</a>
    <a href="report.html">ë¦¬í¬íŠ¸</a>
</nav>

<nav class="sub-nav">
    <a href="game.html">[ê¸°ì´ˆí›ˆë ¨]</a>
    <a href="game8.html" class="current">[N-Backê¸°ì–µ]</a>
</nav>

<main class="game-container">
    <article class="game-guide">
        <strong>ğŸ’¡ N-Back ê·œì¹™ (Level 2 ê¸°ì¤€)</strong><br>
        ì§€ê¸ˆ ë³´ì´ëŠ” ìˆ«ìê°€ <strong>2ë‹¨ê³„ ì „</strong>ì— ë‚˜ì™”ë˜ ìˆ«ìì™€ ê°™ì„ ë•Œ ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”! ì˜ˆ: 3 -> 5 -> 3 (ì´ë•Œ í´ë¦­!)
    </article>

    <div style="display: flex; justify-content: space-between; margin-bottom: 15px; font-weight: bold;">
        <div id="n-level-display" style="color:var(--accent-color)">Level: 2-Back</div>
        <div>Score: <span id="score">0</span></div>
    </div>

    <section id="display-box" class="display-area">
        <div id="number-display">Ready</div>
    </section>

    <div id="action-zone" style="display:none;">
        <button class="match-btn" onclick="handleMatch()">ì¼ì¹˜ (Match!)</button>
        <p style="font-size:0.8rem; color:#aaa; margin-top:12px;">ìˆ«ìê°€ ê°™ì„ ë•Œë§Œ ë¹ ë¥´ê²Œ ëˆ„ë¥´ì„¸ìš”!</p>
    </div>

    <div id="setup-zone">
        <button class="btn-start" onclick="startGame()">í›ˆë ¨ ì‹œì‘í•˜ê¸° (40ì´ˆ)</button>
    </div>

    <section class="ranking-box">
        <div style="font-weight: bold; color: var(--primary-color); margin-bottom: 8px;">ğŸ… ë‚˜ì˜ ì§‘ì¤‘ë ¥ ë“±ê¸‰</div>
        <div id="current-grade" style="font-size: 1.2rem; font-weight: bold; color: #ccc;">ì¸¡ì • ì „</div>
    </section>
</main>

<footer>&copy; 2026 SKZ Brain Lab.</footer>

<script>
    let n = 2; // ê¸°ë³¸ 2-Back
    let sequence = [];
    let score = 0;
    let isGameActive = false;
    let hasPressed = false;
    let gameTimer = null;
    let timeLeft = 40;

    const displayBox = document.getElementById('display-box');
    const numberDisplay = document.getElementById('number-display');
    const scoreDisplay = document.getElementById('score');

    function startGame() {
        if(isGameActive) return;
        
        // ì´ˆê¸°í™”
        isGameActive = true;
        score = 0;
        sequence = [];
        timeLeft = 40;
        scoreDisplay.innerText = "0";
        document.getElementById('setup-zone').style.display = 'none';
        document.getElementById('action-zone').style.display = 'block';
        
        runGameCycle();
    }

    function runGameCycle() {
        if(timeLeft <= 0) {
            endGame();
            return;
        }

        hasPressed = false;
        displayBox.className = 'display-area'; // ë°°ê²½ìƒ‰ ì´ˆê¸°í™”
        
        // ìƒˆë¡œìš´ ìˆ«ì ìƒì„± (1~9)
        // ì•½ 30% í™•ë¥ ë¡œ Në‹¨ê³„ ì „ê³¼ ê°™ì€ ìˆ«ì ìƒì„± (Match ìœ ë„)
        let nextNum;
        if (sequence.length >= n && Math.random() < 0.3) {
            nextNum = sequence[sequence.length - n];
        } else {
            nextNum = Math.floor(Math.random() * 9) + 1;
        }
        
        sequence.push(nextNum);
        numberDisplay.innerText = nextNum;
        
        timeLeft--;

        // 2ì´ˆë§ˆë‹¤ ìˆ«ì êµì²´
        gameTimer = setTimeout(() => {
            // ë§Œì•½ Match ìƒí™©ì¸ë° ì•ˆ ëˆŒë €ë‹¤ë©´ ê°ì  (ì„ íƒ ì‚¬í•­)
            if(!hasPressed && sequence.length > n) {
                if(sequence[sequence.length-1] === sequence[sequence.length-(n+1)]) {
                    // ë†“ì³¤ì„ ë•Œ ì²˜ë¦¬í•˜ê³  ì‹¶ë‹¤ë©´ ì—¬ê¸°ì— ì¶”ê°€
                }
            }
            runGameCycle();
        }, 1800);
    }

    function handleMatch() {
        if(!isGameActive || hasPressed) return;
        hasPressed = true;

        const current = sequence[sequence.length - 1];
        const target = sequence[sequence.length - (n + 1)];

        if (current === target) {
            score += 10;
            scoreDisplay.innerText = score;
            triggerFeedback('correct');
        } else {
            score = Math.max(0, score - 5);
            scoreDisplay.innerText = score;
            triggerFeedback('wrong');
        }
    }

    function triggerFeedback(type) {
        displayBox.classList.add(type);
        setTimeout(() => displayBox.classList.remove(type), 300);
    }

    function endGame() {
        isGameActive = false;
        clearTimeout(gameTimer);
        numberDisplay.innerText = "ì¢…ë£Œ";
        document.getElementById('setup-zone').style.display = 'block';
        document.getElementById('action-zone').style.display = 'none';

        // ë“±ê¸‰ ì‚°ì¶œ
        let grade = "C (ì¼ë°˜)";
        if(score >= 100) grade = "S (ì²œì¬ì  ì§‘ì¤‘ë ¥)";
        else if(score >= 70) grade = "A (ë§¤ìš° ë†’ìŒ)";
        else if(score >= 40) grade = "B (ìš°ìˆ˜í•¨)";
        
        document.getElementById('current-grade').innerText = grade;
        document.getElementById('current-grade').style.color = "var(--accent-color)";
        
        // ë¦¬í¬íŠ¸ ì €ì¥ìš©
        localStorage.setItem('game8_score', score);
        
        alert(`í›ˆë ¨ ì¢…ë£Œ!\në‹¹ì‹ ì˜ ì ìˆ˜ëŠ” ${score}ì ì…ë‹ˆë‹¤.\në“±ê¸‰: ${grade}`);
    }
</script>
</body>
</html>
