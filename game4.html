<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ê¸°ì–µë ¥ í›ˆë ¨: íƒ€ì¼ ìœ„ì¹˜ ê¸°ì–µí•˜ê¸° | SKZ Brain Lab</title>

    <meta name="description" content="ì ì‹œ ë‚˜íƒ€ë‚¬ë‹¤ ì‚¬ë¼ì§€ëŠ” íƒ€ì¼ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì–µí•˜ê³  ë§ì¶”ë©° ë‹¹ì‹ ì˜ ë‹¨ê¸° ê¸°ì–µë ¥ì„ í•œê³„ê¹Œì§€ ì‹œí—˜í•´ë³´ì„¸ìš”.">
    <meta name="keywords" content="ê¸°ì–µë ¥í›ˆë ¨, ë‘ë‡Œê²Œì„, ê¸°ì–µë ¥í…ŒìŠ¤íŠ¸, ì¸ì§€ëŠ¥ë ¥, ë‡Œí™œì„±í™”, SKZBrainLab">

    <meta property="og:title" content="ë‹¹ì‹ ì€ 'ì „ì„¤ì˜ ì½”ë¼ë¦¬'ê¸‰ ê¸°ì–µë ¥ì¸ê°€ìš”? - SKZ ê¸°ì–µë ¥ í›ˆë ¨">
    <meta property="og:description" content="ë§¤ì¼ 5ë¶„, ì‚¬ë¼ì§€ëŠ” íƒ€ì¼ì„ ë§ì¶”ë©° ë‡Œì˜ ë‹¨ê¸° ê¸°ì–µ ìš©ëŸ‰ì„ í‚¤ì›Œë³´ì„¸ìš”.">
    <meta property="og:image" content="img/index.jpg"> <meta property="og:url" content="https://jeonghyeonmi.github.io/hmi/game4.html">
    <style>
        :root { 
            --primary-color: #1a3a5f; --bg-color: #f4f7f9; --accent-color: #e67e22; 
            --text-main: #2c3e50; --text-content: #34495e;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; 
            background-color: var(--bg-color); margin: 0; color: var(--text-main); line-height: 1.6;
        }
        
         /* í—¤ë”/ë„¤ë¹„ê²Œì´ì…˜ */
        header { background: var(--primary-color); color: white; padding: 1.2rem; text-align: center; }
        header h1 { margin: 0; font-size: 1.4rem; font-weight: 800; }
        header h1 a { text-decoration: none; color: inherit; }
        header p { margin: 5px 0 0; font-size: 0.85rem; opacity: 0.8; }

        /* ë„¤ë¹„ê²Œì´ì…˜ ê³µí†µ ìŠ¤íƒ€ì¼ */
        nav.main-nav { 
            background: white; padding: 0.8rem; display: flex; justify-content: center; gap: 1.2rem; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000;
            overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; scrollbar-width: none;
        }
        nav.main-nav::-webkit-scrollbar { display: none; }
        @media (max-width: 480px) { nav.main-nav { justify-content: flex-start; padding-left: 1.2rem; padding-right: 1.2rem; } }
        nav.main-nav a { text-decoration: none; color: var(--primary-color); font-weight: bold; font-size: 0.9rem; flex-shrink: 0; }
        nav.main-nav a.active { color: var(--accent-color); border-bottom: 2px solid var(--accent-color); }

        /* ì„œë¸Œ ë„¤ë¹„ê²Œì´ì…˜ */
        .sub-nav { display: flex; justify-content: center; gap: 15px; padding: 12px 0; background: #fff; border-bottom: 1px solid #eee; font-size: 0.75rem; }
        .sub-nav a { text-decoration: none; color: #aaa; font-weight: 500; }
        .sub-nav a.current { color: var(--accent-color); font-weight: bold; }

        .container { 
            width: 94%; max-width: 500px; margin: 1.5rem auto; padding: 25px; 
            background: white; border-radius: 24px; box-shadow: 0 10px 40px rgba(0,0,0,0.04); text-align: center; 
        }

        .game-guide { 
            background: #fff5eb; border-radius: 12px; padding: 15px; font-size: 0.85rem; 
            line-height: 1.5; color: #444; margin-bottom: 20px; text-align: left; border-left: 4px solid var(--accent-color); 
        }
        .game-guide strong { color: var(--accent-color); display: block; margin-bottom: 4px; }
        
        #status-msg { font-size: 1.2rem; font-weight: 800; color: var(--primary-color); margin-bottom: 20px; height: 1.6rem; }
        
        /* ê¸°ì–µë ¥ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ ìµœì í™” */
        .memory-grid { 
            display: grid; margin: 20px auto; gap: 8px; width: 100%; max-width: 350px; 
        }
        .tile { 
            width: 100%; aspect-ratio: 1 / 1; background: #eee; border-radius: 12px; 
            cursor: pointer; transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        .tile.active { background: var(--accent-color); transform: scale(1.02); box-shadow: 0 4px 12px rgba(230, 126, 34, 0.4); }
        .tile.correct { background: #2ecc71; transform: scale(0.95); }
        .tile.wrong { background: #e74c3c; animation: shake 0.3s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .btn-start { 
            width: 100%; max-width: 280px; padding: 16px; background: var(--accent-color); 
            color: white; border: none; border-radius: 30px; font-weight: bold; font-size: 1.1rem;
            margin-top: 10px; cursor: pointer; box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3); transition: 0.2s;
        }
        .btn-start:active { transform: scale(0.98); box-shadow: 0 2px 8px rgba(230, 126, 34, 0.2); }
        
        /* ë­í‚¹/ê¸°ë¡ ì„¹ì…˜ */
        .ranking-container { margin-top: 35px; border-top: 2px dashed #eee; padding-top: 25px; }
        .ranking-title { font-size: 1.1rem; font-weight: bold; color: var(--primary-color); margin-bottom: 15px; }
        .rank-table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        .rank-table th { padding: 10px; color: #888; border-bottom: 1px solid #eee; }
        .rank-table td { padding: 12px 5px; border-bottom: 1px solid #f9f9f9; color: var(--text-content); }
        
        footer { text-align: center; padding: 3rem 0; color: #bbb; font-size: 0.8rem; line-height: 1.8; }
        footer a { color: #aaa; text-decoration: none; margin: 0 8px; }
    </style>
</head>
<body>
    <header>
        <h1><a href="index.html">SKZ ë‘ë‡Œ í›ˆë ¨ì†Œ</a></h1>
    </header>
    
    <nav class="main-nav">
        <a href="index.html">í™ˆ</a>
        <a href="game.html">ì§‘ì¤‘ë ¥</a>
        <a href="game2.html">ë…¼ë¦¬ë ¥</a>
        <a href="game3.html" class="active">íŒë‹¨ë ¥</a>
        <a href="report.html">ë¦¬í¬íŠ¸</a>
        <a href="posts.html">ë¶„ì„ì‹¤</a>
    </nav>

    <div class="sub-nav">
        <a href="game3.html">[ìˆœë°œë ¥]</a>
        <a href="game4.html" class="current">[ê¸°ì–µë ¥]</a>
        <a href="game5.html">[ìˆ˜ë¦¬íŒë‹¨]</a>
        <a href="game6.html">[ë™ë¬¼ì¸ì§€]</a>
    </div>

    <main class="container">
        <div class="game-guide">
            <strong>ğŸ§© í›ˆë ¨ ê·œì¹™</strong>
            ì ì‹œ ë‚˜íƒ€ë‚˜ëŠ” ì£¼í™©ìƒ‰ íƒ€ì¼ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì–µí•˜ì„¸ìš”. íƒ€ì¼ì´ ì‚¬ë¼ì§€ë©´ ê¸°ì–µí•œ ìœ„ì¹˜ë¥¼ ëª¨ë‘ í´ë¦­í•˜ì„¸ìš”!
        </div>
        
        <div id="status-msg">ë„ì „í•  ì¤€ë¹„ ë˜ì…¨ë‚˜ìš”?</div>
        <div id="memoryBoard" class="memory-grid"></div>
        
        <button id="startBtn" class="btn-start" onclick="startGame()">í›ˆë ¨ ì‹œì‘</button>
        
        <div class="ranking-container">
            <div class="ranking-title">ğŸ“Š ë‚˜ì˜ ê¸°ì–µë ¥ ì¼ì§€</div>
            <div id="best-record" style="font-size:0.95rem; color:var(--accent-color); font-weight:bold; margin-bottom:12px;">ìµœê³  ë ˆë²¨: -</div>
            <table class="rank-table">
                <thead>
                    <tr><th>íšŒì°¨</th><th>ë‚ ì§œ</th><th>ê²°ê³¼</th></tr>
                </thead>
                <tbody id="rankingBody"></tbody>
            </table>
            <button onclick="clearHistory()" style="margin-top:20px; background:none; border:none; color:#ccc; font-size:0.75rem; text-decoration:underline; cursor:pointer;">ê¸°ë¡ ì´ˆê¸°í™”</button>
        </div>
    </main>

    <footer>
        <div style="margin-bottom: 10px;">
            <a href="privacy.html">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a> | 
            <a href="terms.html">ì´ìš©ì•½ê´€</a>
        </div>
        &copy; 2026 SKZ Brain Lab. All rights reserved.
    </footer>

    <script>
        let level = 1, targetTiles = [], userSelection = [], isWait = false;
        
        function initBoard() {
            const board = document.getElementById('memoryBoard');
            board.innerHTML = '';
            const size = level < 4 ? 3 : (level < 7 ? 4 : 5);
            board.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
            
            for(let i=0; i < size * size; i++) {
                const tile = document.createElement('div');
                tile.className = 'tile';
                tile.onclick = () => handleTileClick(i, tile);
                board.appendChild(tile);
            }
        }

        function startGame() {
            if(isWait) return;
            isWait = true;
            userSelection = [];
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('status-msg').innerText = `Lv.${level} - ê¸°ì–µí•˜ì„¸ìš”!`;
            
            const tiles = document.querySelectorAll('.tile');
            tiles.forEach(t => t.className = 'tile');

            targetTiles = [];
            const count = level + 2;
            while(targetTiles.length < count) {
                let rand = Math.floor(Math.random() * tiles.length);
                if(!targetTiles.includes(rand)) targetTiles.push(rand);
            }

            targetTiles.forEach(idx => tiles[idx].classList.add('active'));

            setTimeout(() => {
                targetTiles.forEach(idx => tiles[idx].classList.remove('active'));
                document.getElementById('status-msg').innerText = `íƒ€ì¼ì˜ ìœ„ì¹˜ë¥¼ í´ë¦­í•˜ì„¸ìš”!`;
                isWait = false;
            }, 1000 + (level * 150));
        }

        function handleTileClick(idx, tile) {
            if(isWait || targetTiles.length === 0 || userSelection.includes(idx)) return;

            if(targetTiles.includes(idx)) {
                tile.classList.add('correct');
                userSelection.push(idx);
                if(userSelection.length === targetTiles.length) {
                    level++;
                    isWait = true;
                    setTimeout(() => {
                        initBoard();
                        isWait = false;
                        startGame();
                    }, 600);
                }
            } else {
                tile.classList.add('wrong');
                endGame();
            }
        }

        function endGame() {
            let grade = "";
            if (level >= 10) grade = "ì „ì„¤ì˜ ì½”ë¼ë¦¬ ğŸ˜";
            else if (level >= 7) grade = "ì¸ê°„ ë¸”ë™ë°•ìŠ¤ ğŸ“¸";
            else if (level >= 4) grade = "ëª…ì„í•œ ë‘ë‡Œ ğŸ§ ";
            else grade = "ì–´ì œ ì¼ë„ ê°€ë¬¼ê°€ë¬¼ ğŸ ";

            const resultMsg = `í›ˆë ¨ ì¢…ë£Œ!\në“±ê¸‰: ${grade}\nìµœì¢… ë„ë‹¬: Level ${level}\n\nì§€ê¸ˆ ë°”ë¡œ ë¶„ì„ ë¦¬í¬íŠ¸ë¥¼ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`;
            saveRecord(level, resultMsg);

            level = 1;
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('startBtn').innerText = 'ë‹¤ì‹œ ë„ì „í•˜ê¸°';
            document.getElementById('status-msg').innerText = 'í›ˆë ¨ ê²°ê³¼';
            initBoard();
        }

        function saveRecord(score, msg) {
            // --- [ì—…ë°ì´íŠ¸: ìµœê·¼ 10íšŒ ê¸°ë¡ í‰ê·  ì €ì¥ ë¡œì§] ---
            const reportScore = Math.min(100, score * 10); // Lv.10 ê¸°ì¤€ 100ì  í™˜ì‚°
            
            // 1. ìµœê·¼ 10íšŒ ê¸°ë¡ ë°°ì—´ ê´€ë¦¬ (report.html ì—°ë™ìš©)
            let scoreHistory = JSON.parse(localStorage.getItem('game4_history')) || [];
            scoreHistory.push(reportScore);
            if (scoreHistory.length > 10) scoreHistory.shift();
            localStorage.setItem('game4_history', JSON.stringify(scoreHistory));

            // 2. ë‹¨ì¼ ìµœì‹  ì ìˆ˜ ì €ì¥ (ê¸°ì¡´ í˜¸í™˜ì„±ìš©)
            localStorage.setItem('game4_score', reportScore);

            // 3. ë‚´ë¶€ ë¡œê·¸ìš© memHistory ì €ì¥
            const now = new Date();
            const dateStr = `${now.getMonth()+1}/${now.getDate()}`;
            let history = JSON.parse(localStorage.getItem('memHistory')) || [];
            history.unshift({ date: dateStr, score: score });
            localStorage.setItem('memHistory', JSON.stringify(history.slice(0, 10)));
            // ----------------------------------------------

            displayHistory();

            if (confirm(msg)) {
                location.href = 'report.html';
            }
        }

        function displayHistory() {
            const body = document.getElementById('rankingBody');
            const history = JSON.parse(localStorage.getItem('memHistory')) || [];
            if(history.length > 0) {
                const best = Math.max(...history.map(h => h.score));
                document.getElementById('best-record').innerText = `â­ ë‚˜ì˜ ìµœê³  ë ˆë²¨: Lv.${best}`;
                body.innerHTML = history.map((h, i) => `
                    <tr>
                        <td>${history.length - i}íšŒì°¨</td>
                        <td>${h.date}</td>
                        <td style="font-weight:bold; color:var(--accent-color);">Lv.${h.score}</td>
                    </tr>
                `).join('');
            } else {
                body.innerHTML = '<tr><td colspan="3">ì•„ì§ í›ˆë ¨ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
            }
        }

        function clearHistory() { 
            if(confirm("ëª¨ë“  ê¸°ë¡ì„ ì´ˆê¸°í™”í• ê¹Œìš”?")) { 
                localStorage.removeItem('memHistory'); 
                localStorage.removeItem('game4_history'); 
                location.reload(); 
            } 
        }

        initBoard();
        displayHistory();
    </script>
</body>
</html>
