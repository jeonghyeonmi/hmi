<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ê¸°ì–µë ¥ í›ˆë ¨ | SKZ Brain Lab</title>
    <style>
        :root { 
            --primary-color: #1a3a5f; --bg-color: #f4f7f9; --accent-color: #e67e22; 
            --text-main: #2c3e50; --text-content: #34495e;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; 
            background-color: var(--bg-color); margin: 0; color: var(--text-main);
        }
        
        header { background: var(--primary-color); color: white; padding: 1.2rem; text-align: center; }
        header h1 a { text-decoration: none; color: inherit; font-size: 1.4rem; font-weight: 800; display: inline-block; /* í„°ì¹˜ ì˜ì—­ í™•ë³´ */ }

        /* 1ì°¨ ë„¤ë¹„ê²Œì´ì…˜ (ê³µí†µ ìŠ¤íƒ€ì¼) */
        nav.main-nav { 
            background: white; padding: 0.8rem; display: flex; justify-content: center; gap: 1.2rem; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000;
            overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; scrollbar-width: none;
        }
        nav.main-nav::-webkit-scrollbar { display: none; }
        @media (max-width: 480px) {
            nav.main-nav { justify-content: flex-start; padding-left: 1.2rem; padding-right: 1.2rem; }
        }
        nav.main-nav a { text-decoration: none; color: var(--primary-color); font-weight: bold; font-size: 0.9rem; flex-shrink: 0; }

        /* ğŸ’¡ 2ì°¨ ë„¤ë¹„ê²Œì´ì…˜ (íŒë‹¨ë ¥ ì¹´í…Œê³ ë¦¬ ì „ìš©) */
        .sub-nav { 
            display: flex; justify-content: center; gap: 20px; padding: 12px 0; 
            background: #fff; border-bottom: 1px solid #eee; font-size: 0.8rem; 
        }
        .sub-nav a { text-decoration: none; transition: 0.2s; }

        .container { width: 94%; max-width: 500px; margin: 1.5rem auto; padding: 25px; background: white; border-radius: 24px; box-shadow: 0 10px 40px rgba(0,0,0,0.04); text-align: center; }
        .game-guide { 
            background: #fff5eb; border-radius: 12px; padding: 15px; font-size: 0.85rem; 
            line-height: 1.5; color: #444; margin-bottom: 20px; text-align: left; border-left: 4px solid var(--accent-color); 
        }
        
        #status-msg { font-size: 1.2rem; font-weight: 800; color: var(--primary-color); margin-bottom: 15px; height: 1.6rem; }
        
        /* ê¸°ì–µë ¥ ê·¸ë¦¬ë“œ */
        .memory-grid { display: grid; margin: 20px auto; gap: 10px; width: fit-content; }
       /* ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆ: í™”ë©´ ë„ˆë¹„ë¥¼ ë„˜ì§€ ì•Šë„ë¡ ì„¤ì • */
.memory-grid { 
    display: grid; 
    margin: 20px auto; 
    gap: 8px; /* íƒ€ì¼ ì‚¬ì´ ê°„ê²© */
    width: 90%; /* í™”ë©´ì˜ 90%ë§Œ ì°¨ì§€ */
    max-width: 400px; /* ë„ˆë¬´ ì»¤ì§€ì§€ ì•Šê²Œ ì œí•œ */
}

/* íƒ€ì¼: ê³ ì • px ëŒ€ì‹  ë¹„ìœ¨(aspect-ratio) ì‚¬ìš© */
.tile { 
    width: 100%; /* ë¶€ëª¨ ê·¸ë¦¬ë“œ ì¹¸ì— ê°€ë“ ì±„ì›€ */
    aspect-ratio: 1 / 1; /* ì •ì‚¬ê°í˜• ìœ ì§€ */
    background: #eee; 
    border-radius: 8px; 
    cursor: pointer; 
    transition: 0.2s; 
}
        .tile.active { background: var(--accent-color); transform: scale(1.05); }
        .tile.correct { background: #2ecc71; transform: scale(0.95); }
        .tile.wrong { background: #e74c3c; animation: shake 0.3s; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .btn-start { 
            width: 100%; max-width: 280px; padding: 16px; background: var(--accent-color); 
            color: white; border: none; border-radius: 30px; font-weight: bold; font-size: 1.1rem;
            margin-top: 10px; cursor: pointer; box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3);
        }
        
        /* ë­í‚¹/ê¸°ë¡ ì„¹ì…˜ */
        .ranking-container { margin-top: 35px; border-top: 2px dashed #eee; padding-top: 25px; }
        .rank-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
        .rank-table td { padding: 12px 5px; border-bottom: 1px solid #f9f9f9; color: var(--text-content); }
        
        footer { text-align: center; padding: 3rem 0; color: #bbb; font-size: 0.8rem; }
    </style>
</head>
<body>
    <header>
<h1><a href="index.html" style="text-decoration: none; color: inherit;">ğŸ§  SKZ Brain Lab</a></h1>        <p>ìš°ë¦¬ ë‡Œë¥¼ ìœ„í•œ ê±´ê°•í•œ ë””ì§€í„¸ ìŠµê´€ ë§Œë“¤ê¸°</p>
    </header>
    
    <nav class="main-nav">
        <a href="index.html">í™ˆ</a>
        <a href="game.html">ì§‘ì¤‘ë ¥</a>
        <a href="game2.html">ë…¼ë¦¬ë ¥</a>
        <a href="game3.html" style="color:var(--accent-color); border-bottom:2px solid var(--accent-color);">íŒë‹¨ë ¥</a>
        <a href="post1.html">ë¶„ì„ì‹¤</a>
    </nav>

    <div style="display: flex; justify-content: center; gap: 15px; padding: 12px 0; background: #fff; border-bottom: 1px solid #eee; font-size: 0.75rem;">
    <a href="game3.html" style="text-decoration: none; color: #aaa;">[ìˆœë°œë ¥]</a>
    <a href="game4.html" style="text-decoration: none; color: var(--accent-color); font-weight: bold;">[ê¸°ì–µë ¥]</a>
    <a href="game5.html" style="text-decoration: none; color: #aaa;">[ìˆ˜ë¦¬íŒë‹¨]</a>
</div>

    <main class="container">
        <div class="game-guide">
            <strong>ğŸ§© ê¸°ì–µë ¥ í›ˆë ¨:</strong><br>
            ì ì‹œ ë™ì•ˆ ë‚˜íƒ€ë‚˜ëŠ” ì£¼í™©ìƒ‰ íƒ€ì¼ì˜ ìœ„ì¹˜ë¥¼ ê¸°ì–µí•˜ì„¸ìš”. íƒ€ì¼ì´ ì‚¬ë¼ì§€ë©´ ê¸°ì–µí•œ ìœ„ì¹˜ë¥¼ ëª¨ë‘ í´ë¦­í•˜ì„¸ìš”!
        </div>
        
        <div id="status-msg">ë„ì „í•  ì¤€ë¹„ ë˜ì…¨ë‚˜ìš”?</div>
        <div id="memoryBoard" class="memory-grid"></div>
        
        <button id="startBtn" class="btn-start" onclick="startGame()">í›ˆë ¨ ì‹œì‘</button>
        
        <div class="ranking-container">
            <div id="best-record" style="font-size:0.95rem; color:var(--accent-color); font-weight:bold; margin-bottom:12px;">ìµœê³  ê¸°ë¡: -</div>
            <table class="rank-table">
                <thead>
                    <tr style="color:var(--text-main); font-size:0.8rem;">
                        <th>íšŒì°¨</th><th>ë‚ ì§œ</th><th>ê²°ê³¼</th>
                    </tr>
                </thead>
                <tbody id="rankingBody"></tbody>
            </table>
            <button onclick="clearHistory()" style="margin-top:20px; background:none; border:none; color:#ccc; font-size:0.75rem; text-decoration:underline; cursor:pointer;">ê¸°ë¡ ì´ˆê¸°í™”</button>
        </div>
    </main>

    <footer>&copy; 2026 SKZ Brain Lab.</footer>

    <script>
        let level = 1, targetTiles = [], userSelection = [], isWait = false;
        
        // ë³´ë“œ ì´ˆê¸°í™” ë° ê·¸ë¦¬ë“œ ìƒì„±
        function initBoard() {
    const board = document.getElementById('memoryBoard');
    board.innerHTML = '';
    
    // ë ˆë²¨ì— ë”°ë¥¸ ì¹¸ ìˆ˜ ê²°ì •
    const size = level < 4 ? 3 : (level < 7 ? 4 : 5);
    
    // ğŸ’¡ í•µì‹¬: 1frì„ ì‚¬ìš©í•˜ì—¬ ê°€ë¡œ ë„ˆë¹„ë¥¼ ê· ë“±í•˜ê²Œ ë‚˜ëˆ•ë‹ˆë‹¤.
    board.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
    
    for(let i=0; i < size * size; i++) {
        const tile = document.createElement('div');
        tile.className = 'tile';
        tile.onclick = () => handleTileClick(i, tile);
        board.appendChild(tile);
    }
        }

        // ê²Œì„ ì‹œì‘
        function startGame() {
            if(isWait) return;
            isWait = true;
            userSelection = [];
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('status-msg').innerText = `Lv.${level} - ê¸°ì–µí•˜ì„¸ìš”!`;
            
            const tiles = document.querySelectorAll('.tile');
            tiles.forEach(t => t.className = 'tile');

            // ëœë¤ íƒ€ì¼ ì¶”ì¶œ (ë ˆë²¨ + 2ê°œ)
            targetTiles = [];
            const count = level + 2;
            while(targetTiles.length < count) {
                let rand = Math.floor(Math.random() * tiles.length);
                if(!targetTiles.includes(rand)) targetTiles.push(rand);
            }

            // íƒ€ì¼ ë³´ì—¬ì£¼ê¸°
            targetTiles.forEach(idx => tiles[idx].classList.add('active'));

            setTimeout(() => {
                targetTiles.forEach(idx => tiles[idx].classList.remove('active'));
                document.getElementById('status-msg').innerText = `íƒ€ì¼ì˜ ìœ„ì¹˜ëŠ” ì–´ë””ì˜€ì„ê¹Œìš”?`;
                isWait = false;
            }, 1000 + (level * 150)); // ë ˆë²¨ì´ ì˜¤ë¥¼ìˆ˜ë¡ ë…¸ì¶œ ì‹œê°„ ë¯¸ì„¸í•˜ê²Œ ì¦ê°€
        }

        // íƒ€ì¼ í´ë¦­ ì²˜ë¦¬
        function handleTileClick(idx, tile) {
            if(isWait || targetTiles.length === 0 || userSelection.includes(idx)) return;

            if(targetTiles.includes(idx)) {
                tile.classList.add('correct');
                userSelection.push(idx);
                // ëª¨ë“  íƒ€ì¼ì„ ë‹¤ ì°¾ì•˜ì„ ë•Œ
                if(userSelection.length === targetTiles.length) {
                    level++;
                    isWait = true;
                    setTimeout(() => {
                        initBoard();
                        isWait = false;
                        startGame();
                    }, 600);
                }
            } else {
                tile.classList.add('wrong');
                endGame();
            }
        }

        // ê²Œì„ ì¢…ë£Œ ë° ë“±ê¸‰ íŒì •
        function endGame() {
            let grade = "";
            if (level >= 10) grade = "ì „ì„¤ì˜ ì½”ë¼ë¦¬ ğŸ˜";
            else if (level >= 7) grade = "ì¸ê°„ ë¸”ë™ë°•ìŠ¤ ğŸ“¸";
            else if (level >= 4) grade = "ëª…ì„í•œ ë‘ë‡Œ ğŸ§ ";
            else grade = "ì–´ì œ ì¼ë„ ê°€ë¬¼ê°€ë¬¼ ğŸ ";

            alert(`í›ˆë ¨ ì¢…ë£Œ!\në“±ê¸‰: ${grade}\nìµœì¢… ë„ë‹¬: Level ${level}`);
            
            saveRecord(level);
            level = 1;
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('startBtn').innerText = 'ë‹¤ì‹œ ë„ì „í•˜ê¸°';
            document.getElementById('status-msg').innerText = 'í›ˆë ¨ ê²°ê³¼ í™•ì¸';
            initBoard();
        }

        // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ê¸°ë¡ ì €ì¥
        function saveRecord(score) {
            const now = new Date();
            const dateStr = `${now.getMonth()+1}/${now.getDate()}`;
            let history = JSON.parse(localStorage.getItem('memHistory')) || [];
            history.unshift({ date: dateStr, score: score });
            localStorage.setItem('memHistory', JSON.stringify(history.slice(0, 10)));
            displayHistory();
        }

        // ê¸°ë¡ í‘œì‹œ
        function displayHistory() {
            const body = document.getElementById('rankingBody');
            const history = JSON.parse(localStorage.getItem('memHistory')) || [];
            if(history.length > 0) {
                const best = Math.max(...history.map(h => h.score));
                document.getElementById('best-record').innerText = `â­ ë‚˜ì˜ ìµœê³  ë ˆë²¨: Lv.${best}`;
                body.innerHTML = history.map((h, i) => `
                    <tr>
                        <td>${history.length - i}íšŒì°¨</td>
                        <td>${h.date}</td>
                        <td style="font-weight:bold; color:var(--accent-color);">Lv.${h.score}</td>
                    </tr>
                `).join('');
            } else {
                body.innerHTML = '<tr><td colspan="3">ì•„ì§ í›ˆë ¨ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
            }
        }

        function clearHistory() { 
            if(confirm("ëª¨ë“  ê¸°ë¡ì„ ì´ˆê¸°í™”í• ê¹Œìš”?")) { 
                localStorage.removeItem('memHistory'); 
                location.reload(); 
            } 
        }

        // ì´ˆê¸° ì‹¤í–‰
        initBoard();
        displayHistory();
    </script>
</body>
</html>
